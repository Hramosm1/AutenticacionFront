<div class="flex flex-col flex-1">
	<app-title title="Equipo de trabajo" subTitle="Asignacion de roles"
						 description="Desde aqui puedes asignar un rol en cada aplicacion a todo tu equipo de trabajo"></app-title>
	<mat-form-field class="w-10/12 mx-auto">
		<mat-label>Aplicacion</mat-label>
		<mat-select [formControl]="aplicacion">
			<mat-option *ngFor="let app of aplicaciones$|async" [value]="app.id">{{app.nombre}}
			</mat-option>
		</mat-select>
	</mat-form-field>

	<div class="mat-elevation-z8 w-10/12 mx-auto">
		<div class="flex flex-col mx-auto w-10/12" *ngIf="usuariosNoAsignados.usuariosSinAsignar>0">
			<span class="text-center text-xl">Existen {{usuariosNoAsignados.usuariosSinAsignar}}</span>
			<button mat-raised-button color="warn" (click)="importar()" [disabled]="cargando">Importar todos los usuarios</button>
		</div>
		<div *ngIf="aplicacion.valid" class="flex gap-6 mx-6">
			<mat-form-field class="w-full">
				<mat-label>Buscar...</mat-label>
				<input matInput [formControl]="buscador"></mat-form-field>
		</div>
		<table mat-table [dataSource]="dataSource" class="w-full">

			<!-- Nombre Column -->
			<ng-container matColumnDef="nombre">
				<th mat-header-cell *matHeaderCellDef> Nombre</th>
				<td mat-cell *matCellDef="let row"> {{row.nombre}} </td>
			</ng-container>

			<!-- Usuario Column -->
			<ng-container matColumnDef="usuario">
				<th mat-header-cell *matHeaderCellDef> Usuario</th>
				<td mat-cell *matCellDef="let row"> {{row.usuario}} </td>
			</ng-container>

			<!-- Rol Column -->
			<ng-container matColumnDef="rol">
				<th mat-header-cell *matHeaderCellDef> Rol</th>
				<td mat-cell *matCellDef="let row"> {{row.rol}} </td>
			</ng-container>

			<ng-container matColumnDef="editar">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let row">
					<button mat-raised-button color="accent" (click)="editar(row)">Editar</button>
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

			<!-- Row shown when there is no matching data. -->
			<tr class="mat-row" *matNoDataRow>
				<td class="mat-cell" colspan="4">
					<div class=" flex justify-between">
						<span>No se encontraron usuarios para esa aplicacion</span>
					</div>
				</td>
			</tr>
		</table>
		<mat-paginator [pageSizeOptions]="[25, 100]" aria-label="Select page of users"></mat-paginator>
	</div>
